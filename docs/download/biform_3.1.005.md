# biForm 社区版 V3.1.005 发版说明

发布日期：2021年11月30日

## 主窗口

- 增加“演示”菜单项
- 第一次运行时自动解压 demo.zip 
- 第一次运行时提示“软件授权协议”
- 增加“许可协议”的菜单项
- 改进“注册”的处理
- 增加“注册流程”按钮
- PFF文件改格式，打包时按新格式打包
- 调整“关于”的界面
- 改进打开的BIF中的图片找不到原始文件时的提示对话框
- 切换到脚本编辑器和试运行时，自动生成表单、控件等的API接口，以便在脚本编辑器和Python交互窗口可以进行代码补全和调用提示

## 界面设计器

- 替换部分工具栏图标
- 增加调整控件间距的快捷键、右键菜单、菜单、工具栏按钮
- 按当前选中的控件动态调整各相关action的可用属性
- 部分控件增加新的属性
- 重新实现设计时控件的外观的后台处理
- 调整“属性编辑器”的外观
- 增加“代码编辑器”控件，但社区版不允许用这个控件
- 增加一些缺省的背景图片

## 脚本编辑器

- 按界面设计动态生成控件的代码提示和自动补全
- 重新生成固定的标准控件接口的自动补全和调用提示.api文件
- 增加可用的Qt5库的所有接口的自动补全和调用提示.api文件
- 改进表单接口的自动补全和动态提示
- 改进函数调用提示，一次可提示多项
- 增加属性类“可读”“可写”的提示
- 增加信号类接口的调用提示和自动补全
- 增加对数据表名、字段名的自动补全和字段说明提示
- 改进调用提示的格式
- 改进动态生成调用提示的算法

## 数据视图设计器

- 重新设计背景和滚动区域外观样式
- 调整有多个数据表时，滚动区域的处理
- 重新设计工具栏
- 重新设计数据表的外观样式
- 改进“自动排版”的算法
- 改进复制数据表时新表的命名规则

## 标准控件

- 重写运行时控件的外观实现
- 增加“代码编辑器”控件及Python接口（社区版不可用）
- 修正标签控件没有发出 linkHovered 信号的问题
- 改进所有控件对半透明、透明背景色属性设置的处理
- 分页控件增加 tabFrameBackground 属性
- 增加更多控制外观的属性

## 运行时引擎

- 改进以单独的窗口方式加载一个PFF程序的处理
- 调整表单运行时的控件外观
- 改进汽泡的处理
- 改进扩展的自定义对话框的外观和接口
- 调整表格控件创建编辑器的处理
- 改进表单关闭时后台的处理
- 改进未注册的biForm开发的PFF运行时的背景水印的处理
- PFF文件改格式，调整对这类文件的处理，同时兼容旧格式
- PFP文件改格式，调整对这类文件的处理，同时兼容旧格式
- 表单在调试状态下运行时，loadData调用时打印几个变量的值供调试参考
- 删除临时的 .py 文件时，同时删除 .pyc 文件
- 发布时增加多媒体相关插件
- 重写表格控件的打印
- 改进在容器控件内的表格控件在打印时边界裁剪的算法
- 改进设置打印份数的算法处理
- 改进表格单色和彩色打印的算法处理
- 改进表格控件带背景属性时打印的处理
- 改进分页控件的打印
- 改进输出PDF的算法
- 改进表格控件单元格设置HTML时对齐的处理
- 改进打印表单列表时调整上下左右边距的处理
- 改进LogSystem对中文路径的处理

## Python接口

- 改进切换到全屏显示的接口的后台处理
- 改进QSerialPort模块接口
- 增加QAccessible类的注册
- 增加QRgba64类的注册
- pubClass中的常量改成用枚举类型
- 标准控件增加的属性增加相应的Python调用接口
- 调整部分函数的名称
- 修正 tableItemDelegate 部分接口未判断 item 指针是否为空的问题
- pubClass增加获取机器序列号的接口
- pubClass增加获取当前应用程序名称版本号的接口
- pubClass增加返回系统剪贴板对象的接口
- 增加 fieldDelegate、fieldEditorDelegate类的属性定义
- 所有标准控件增加 baseMetaObject 接口，以便可以访问其基类的接口
- 多行文本编辑器开放更多接口，主要是增加 cursor、document等相关的接口
- 选择日期的几个对话框增加以字符串形式设置和返回值的接口
- pubClass增加 getMultiLineTextInput 接口
- 选择项目的扩展对话框接口去掉表单对象这个参数
- 改进选择一个或多个项目的扩展对话框的算法和界面
- 改进表格控件 setListBySql 等几个接口对行高的处理，需要使用“缺省行高”来设置行高
- 改进树形控件的 currentItemChaged 信号的处理
- 多行文本控件增加 tabStopDistance 属性 ，缺省为20
- 增加表格控件增加的属性的调用接口

## 其它

- 调整“动作”和 “引用列表”编辑器的外观
- 调整“动作”和 “引用列表”编辑器的工具栏
- 安装包中增加 demo.zip 
